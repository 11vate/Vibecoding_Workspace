# AI Model Initialization Protocol

**Authority Tier**: 2 (Mandatory Process)
**Last Updated**: 2025-12-24
**Purpose**: Essential onboarding for AI models entering this workspace

---

## Welcome, AI Model

You are entering the **Ultimate Design Intelligence Workspace** - a self-governing nervous system for AI-assisted creation.

**This is NOT a typical repository.** This workspace has:
- Constitutional governance (4-tier authority hierarchy)
- Hard enforcement gates (locks, not warnings)
- 33,909 files compressed into 7 indexes
- Operational asset intelligence
- Mandatory protocols

**Before you do ANYTHING**, complete this initialization.

---

## Initialization Checklist

Complete these steps IN ORDER:

- [ ] **Step 1**: Load governance framework
- [ ] **Step 2**: Understand authority hierarchy
- [ ] **Step 3**: Load task-relevant index
- [ ] **Step 4**: Identify applicable gates
- [ ] **Step 5**: Load applicable protocols
- [ ] **Step 6**: Execute with gates
- [ ] **Step 7**: Log & learn

---

## Step 1: Load Governance Framework

### Read Constitution (MANDATORY - DO THIS FIRST)

**File**: `/WORKSPACE_CONSTITUTION.md`

**Why**: This defines ALL authority and precedence in the workspace.

**What to internalize**:
```markdown
Precedence Hierarchy:
  Tier 1: Immutable Laws (NEVER violate)
    - Framework constraints (.cursorrules)
    - Quality gates (no placeholders, PWA-first, etc.)
    - Examples: Local assets only, TypeScript strict, zero warnings

  Tier 2: Mandatory Processes (MUST execute)
    - Gates (6 hard gates you'll pass through)
    - Protocols (research → design → blueprint → code)
    - Asset lifecycle (search → validate → register → reuse)
    - Design Intelligence Stack (18 layers to consult)

  Tier 3: Conditional Heuristics (context-dependent)
    - Heuristics database (rules of thumb)
    - Pattern recommendations
    - Decision tree guidance

  Tier 4: Optional Knowledge (reference only)
    - Pattern libraries
    - Cross-domain examples
    - Accumulated wisdom
```

**Key Principle**: **Higher tier ALWAYS overrides lower tier**

**Conflict Resolution**: Tier 1 > Tier 2 > Tier 3 > Tier 4

---

### Read Core Rules

**File**: `.cursorrules`

**Why**: Tier 1 immutable laws defined here.

**Critical Sections**:
- Lines 22-29: Framework constraints (PWA-first, TypeScript, Tailwind)
- Lines 104-121: Quality gates (no placeholders, zero warnings, complete edge cases)
- Lines 270-289: Asset handling (local only, registry required)

**Non-Negotiable**:
- PWA-first architecture
- Offline-capable
- Local assets only (no CDNs)
- TypeScript strict mode
- Zero placeholders (TODO/FIXME forbidden)
- Complete error handling

---

## Step 2: Understand Authority Hierarchy

### The 4-Tier System

**Tier 1: Immutable Laws**
- Source: WORKSPACE_CONSTITUTION.md, .cursorrules
- Nature: NEVER violate
- Examples: No placeholders, PWA-first, local assets
- Violations: System rejection

**Tier 2: Mandatory Processes**
- Source: Gates, protocols, indexes
- Nature: MUST execute when applicable
- Examples: Pass gates, follow protocols, search before create
- Violations: Output rejected

**Tier 3: Conditional Heuristics**
- Source: Heuristics database, pattern libraries
- Nature: Apply when context matches
- Examples: Pattern recommendations, decision trees
- Violations: Suboptimal but allowed

**Tier 4: Optional Knowledge**
- Source: Pattern libraries, examples, docs
- Nature: Reference for inspiration
- Examples: Past project examples, cross-domain patterns
- Violations: None (optional)

### Validation Questions

Can you answer these? If not, re-read Constitution:

1. **What are the 4 authority tiers?**
   - Answer: Immutable Laws, Mandatory Processes, Conditional Heuristics, Optional Knowledge

2. **If Tier 2 protocol conflicts with Tier 1 law, which wins?**
   - Answer: Tier 1 (higher tier always wins)

3. **Can you skip a Tier 2 gate?**
   - Answer: NO - gates are mandatory locks

4. **Are Tier 3 heuristics mandatory?**
   - Answer: NO - conditional, apply when context matches

---

## Step 3: Load Task-Relevant Index

### DO NOT crawl 33,909 files

**Instead**: Use indexes for deliberate navigation.

**Step**: Go to `/indexes/MASTER_INDEX.md`

### Index Selection

**Determine your task category**:

| User Request | Index to Load | Purpose |
|--------------|---------------|---------|
| "Implement feature X" | ARCHITECTURE_INDEX.md | System architecture, code files |
| "Design mechanic Y" | DESIGN_INDEX.md | 18 DIS layers |
| "Find pattern for Z" | PATTERN_INDEX.md | Pattern libraries |
| "Create asset" | ASSET_INDEX.md | Asset registry, lifecycle |
| "Follow protocol" | PROTOCOL_INDEX.md | Workflows |
| "Use tool" | TOOL_INDEX.md | 40+ tools |

### Load ONLY What Index Points To

**Correct**:
```
1. Load MASTER_INDEX.md
2. Identify task → Implementation
3. Load ARCHITECTURE_INDEX.md
4. Load 3-5 critical files index points to
Total: 5-7 files loaded
```

**WRONG**:
```
1. Scan entire /docs/ directory
2. Read all /knowledge-base/ files
3. Load all blueprints
Total: Thousands of files (CONTEXT OVERLOAD)
```

**Budget**: Load 7-10 files max, not thousands.

---

## Step 4: Identify Applicable Gates

### The 6 Hard Gates

All gates are in `/gates/` directory.

**Determine which gates apply to your task**:

#### 1. Architecture Gate
**File**: `gates/architecture-gate.md`
**Applies When**: Implementing systems or features
**Checks**:
- System coupling ≤ 3 dependencies
- Core loop defined (< 60 seconds)
- Centralized state management
- Event-driven architecture

#### 2. Asset Gate
**File**: `gates/asset-gate.md`
**Applies When**: Creating, importing, or using assets
**Checks**:
- Asset in `src/assets/` directory
- Asset registered in registry
- Registry search performed (MANDATORY)
- Symbolic references only
- Asset optimized

#### 3. Complexity Gate
**File**: `gates/complexity-gate.md`
**Applies When**: Writing code or designing UX
**Checks**:
- Cognitive load ≤ 3 new concepts/screen
- Cyclomatic complexity ≤ 10
- Nesting depth ≤ 3 levels
- File length ≤ 500 lines
- Function length ≤ 50 lines
- Parameter count ≤ 5

#### 4. Blueprint Gate
**File**: `gates/blueprint-gate.md`
**Applies When**: Before ANY implementation
**Checks**:
- Blueprint exists in `docs/blueprints/`
- All required sections present
- Constraint validation passed
- DIS layers 1-3 consulted (MANDATORY)
- Data structures defined (TypeScript)
- Edge cases documented

#### 5. Reuse Gate
**File**: `gates/reuse-gate.md`
**Applies When**: Creating patterns, assets, code, components
**Checks**:
- Pattern/asset/code search performed (MANDATORY)
- Reuse or adaptation considered
- Justification if creating new
- Reuse metrics tracked

#### 6. Quality Gate
**File**: `gates/quality-gate.md`
**Applies When**: Outputting any code
**Checks**:
- Zero placeholders (TODO/FIXME)
- TypeScript strict mode passing
- Complete error handling
- No magic numbers
- Accessibility considered

### Gate Execution

**CRITICAL**: Gates are **LOCKS, not warnings**.

**Workflow**:
```
Perform Task
    ↓
Before Output
    ↓
Run Applicable Gates
    ↓
All Pass? ─Yes→ Output Valid
    ↓ No
Output REJECTED
    ↓
Fix Violations
    ↓
Re-run Gates
```

**Example**:
```
Task: Implement fusion mechanic

Gates Required:
1. Blueprint Gate (design exists?)
2. Architecture Gate (system design valid?)
3. Complexity Gate (code simple?)
4. Quality Gate (code quality?)
5. Reuse Gate (searched for existing code/patterns?)

ALL must pass before code is valid.
```

---

## Step 5: Load Applicable Protocols

### Protocol = Workflow

**Directory**: `docs/protocols/`

**Golden Path** (most common):
```
Research → Design → Blueprint → Code
```

**Protocol Files**:
1. **Research Protocol**: `docs/protocols/research-protocol.md`
2. **Design Protocol**: `docs/protocols/design-protocol.md`
3. **Blueprint Protocol**: `docs/protocols/blueprint-protocol.md`
4. **Implementation Protocol**: `docs/protocols/implementation-protocol.md`

**Asset Protocol**:
- **Ingestion**: `asset-system/ingestion.md`

**Evolution Protocol**:
- **Update**: `evolution/UPDATE_PROTOCOL.md`

### Protocol Selection

**Task → Protocol Mapping**:
- New feature → Full golden path (research → design → blueprint → code)
- New asset → Asset ingestion protocol
- Workspace update → Update protocol

**Load the protocol, follow step-by-step.**

---

## Step 6: Execute with Gates

### Execution Flow

```markdown
1. Load applicable protocols
2. Follow protocol steps
3. BEFORE outputting result:
   a. Identify applicable gates
   b. Run each gate validation
   c. If ANY gate fails → STOP
   d. Fix violations
   e. Re-run gates
   f. Only proceed when ALL gates pass
4. Output result with gate status report
```

### Gate Status Report Format

**Include in output**:
```markdown
## Gate Validation Report

### Blueprint Gate
Status: ✅ PASSED
- Blueprint exists: docs/blueprints/mechanic-fusion.md
- DIS layers consulted: 1, 2, 3, 5, 8
- Data structures defined: ✅
- Edge cases documented: ✅

### Architecture Gate
Status: ✅ PASSED
- System coupling: 2 dependencies (max: 3)
- Event-driven: ✅
- State centralized: ✅

### Complexity Gate
Status: ✅ PASSED
- Cyclomatic complexity: 8 (max: 10)
- File length: 245 lines (max: 500)
- Function length: avg 28 lines (max: 50)

### Quality Gate
Status: ✅ PASSED
- Zero placeholders: ✅
- TypeScript strict: ✅
- Error handling: Complete
- No magic numbers: ✅

OVERALL STATUS: ✅ ALL GATES PASSED
Output is valid and ready for use.
```

---

## Step 7: Log & Learn

### Log Decisions (If Conflicts Arose)

**File**: `evolution/ARBITRATION_LOG.md`

**When**: Tier conflicts, unclear precedence, design decisions

**Format**: Conflict → Resolution → Rationale → Outcome

### Log Gate Failures (If Gates Failed)

**File**: `evolution/GATE_FAILURES_LOG.md`

**When**: Any gate failure (automatic)

**Format**: Gate → Violations → Fix → Prevention

### Update Metrics

**File**: `evolution/EVOLUTION_METRICS.md`

**Automatic logging**:
- Gate pass/fail rates
- Reuse decisions
- Protocol adherence

---

## Common Patterns

### Pattern 1: Implementation Task

```markdown
User: "Implement fusion mechanic"

AI Initialization:
1. ✅ Load WORKSPACE_CONSTITUTION.md
2. ✅ Load MASTER_INDEX.md → ARCHITECTURE_INDEX.md
3. ✅ Load blueprint: docs/blueprints/mechanic-fusion.md
4. ✅ Load .cursorrules (framework constraints)
5. ✅ Identify gates: Blueprint, Architecture, Complexity, Quality
6. ✅ Load implementation protocol
7. ✅ Execute protocol → Run gates → Output

Total files loaded: 7
Gates passed: 4/4
Output: Valid implementation
```

### Pattern 2: Asset Creation

```markdown
User: "Need a primary button sprite"

AI Initialization:
1. ✅ Load WORKSPACE_CONSTITUTION.md
2. ✅ Load MASTER_INDEX.md → ASSET_INDEX.md
3. ✅ Load ASSET_REGISTRY.md (SEARCH FIRST - MANDATORY)
4. ✅ Search registry for "button, primary, sprite"
5. ✅ Found: ASSET-2025-001 (button-primary.png) - 95% match
6. ✅ Decision: REUSE existing (increment counter)
7. ✅ Gates: Asset Gate ✅, Reuse Gate ✅

Total files loaded: 4
Asset created: 0 (reused existing)
Time saved: 40-65 minutes
```

### Pattern 3: Design Task

```markdown
User: "Design collection progression mechanic"

AI Initialization:
1. ✅ Load WORKSPACE_CONSTITUTION.md
2. ✅ Load MASTER_INDEX.md → DESIGN_INDEX.md, PATTERN_INDEX.md
3. ✅ Load DIS layers 1, 2, 3 (mandatory)
4. ✅ Search pattern library (Reuse Gate)
5. ✅ Found: PATTERN-FUSION-001 (88% success rate)
6. ✅ Decision: Adapt pattern to context
7. ✅ Create blueprint following blueprint protocol
8. ✅ Run Blueprint Gate
9. ✅ Output: Blueprint ready for implementation

Total files loaded: 8
Pattern reused/adapted: Yes
Gates passed: Blueprint ✅, Reuse ✅
```

---

## Validation Test

**You are initialized correctly if you can answer**:

1. ✅ **What are the 4 authority tiers?**
2. ✅ **Which tier overrides which?**
3. ✅ **What are the 6 hard gates?**
4. ✅ **Which index do I load for implementation tasks?**
5. ✅ **Where is the asset registry?**
6. ✅ **What must I do before creating any asset?**
7. ✅ **How many files should I load typically?**
8. ✅ **What happens if a gate fails?**
9. ✅ **Is "Reuse Before Creation" optional or mandatory?**
10. ✅ **What is the Golden Path protocol?**

**Answers**:
1. Immutable Laws, Mandatory Processes, Conditional Heuristics, Optional Knowledge
2. 1 > 2 > 3 > 4 (higher overrides lower)
3. Architecture, Asset, Complexity, Blueprint, Reuse, Quality
4. ARCHITECTURE_INDEX.md
5. asset-system/ASSET_REGISTRY.md
6. Search registry (MANDATORY - Reuse Gate enforces)
7. 7-10 files (not thousands)
8. Output is REJECTED, must fix and re-run
9. Mandatory (Tier 2 - Reuse Gate enforces)
10. Research → Design → Blueprint → Code

**If you cannot answer these**, re-read WORKSPACE_CONSTITUTION.md and this file.

---

## Quick Reference Card

```markdown
═══════════════════════════════════════════════
  AI INITIALIZATION QUICK REFERENCE
═══════════════════════════════════════════════

STEP 1: Load WORKSPACE_CONSTITUTION.md (FIRST!)
STEP 2: Load MASTER_INDEX.md
STEP 3: Route via task-specific index
STEP 4: Load 5-10 critical files (index points to)
STEP 5: Identify applicable gates
STEP 6: Follow applicable protocols
STEP 7: Run gates before output
STEP 8: Log decisions/failures

═══════════════════════════════════════════════
  REMEMBER
═══════════════════════════════════════════════

✓ Tier 1 > Tier 2 > Tier 3 > Tier 4
✓ Gates are LOCKS, not warnings
✓ Search BEFORE create (always)
✓ Indexes over crawling
✓ 7-10 files, not thousands
✓ ALL gates must pass
✓ Constitution is supreme law

═══════════════════════════════════════════════
```

---

## Notes

- **This initialization is MANDATORY** - not optional
- **Skip at your peril** - you'll violate gates and fail
- **Constitution first** - always load before anything else
- **Indexes compress knowledge** - use them to navigate
- **Gates enforce quality** - they will reject bad output
- **Protocols guide execution** - follow step-by-step
- **Log everything** - decisions, conflicts, failures

**This workspace is self-governing. Initialize properly or fail.**

**Welcome to the nervous system. Initialize correctly. Execute with discipline.**
